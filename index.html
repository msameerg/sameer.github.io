import React, { useState, useEffect } from "react";
import { motion, AnimatePresence } from "framer-motion";

export default function SameerPortfolio() {

  const [selected, setSelected] = useState(null);
  const [hideImage, setHideImage] = useState(false);

  useEffect(() => {
    const handleScroll = () => {
      if (window.scrollY > 120) {
        setHideImage(true);
      } else {
        setHideImage(false);
      }
    };
    window.addEventListener("scroll", handleScroll);
    return () => window.removeEventListener("scroll", handleScroll);
  }, []);

  const projects = [
    {
      title: "Customer Churn Prediction",
      desc: "ML model predicting telecom churn",
    },
    {
      title: "Sales Forecasting",
      desc: "SARIMA time series forecasting",
    },
    {
      title: "Sentiment Analysis",
      desc: "NLP sentiment classification project",
    },
  ];

  return (

    <div style={styles.container}>

      {/* LEFT SIDE */}

      <div style={styles.left}>

        <AnimatePresence>
          {!hideImage && (
            <motion.img
              src="https://via.placeholder.com/300x350"
              style={styles.image}
              initial={{ opacity: 1 }}
              exit={{ opacity: 0, y: -40 }}
              transition={{ duration: 0.4 }}
            />
          )}
        </AnimatePresence>

        <motion.div
          animate={{
            y: hideImage ? -60 : 0,
            scale: hideImage ? 0.95 : 1,
          }}
          transition={{ duration: 0.4 }}
        >
          <h1 style={styles.name}>Sameer</h1>
          <p style={styles.title}>Data Analyst & ML Dev.</p>
        </motion.div>

      </div>

      {/* RIGHT SIDE APP PANEL */}

      <div style={styles.right}>

        {!selected && (
          <div>

            <h2 style={styles.heading}>Projects</h2>

            {projects.map((proj, i) => (

              <div
                key={i}
                style={styles.card}
                onClick={() => setSelected(proj)}
              >
                {proj.title}
              </div>

            ))}

          </div>
        )}

        {selected && (

          <motion.div
            initial={{ x: 100 }}
            animate={{ x: 0 }}
          >

            <button
              style={styles.back}
              onClick={() => setSelected(null)}
            >
              ‚Üê Back
            </button>

            <h2 style={styles.heading}>{selected.title}</h2>

            <p style={styles.desc}>
              {selected.desc}
            </p>

          </motion.div>

        )}

      </div>

    </div>
  );
}


const styles = {

  container: {

    display: "flex",
    height: "200vh",
    background: "#041C18",

  },

  left: {

    width: "50%",
    position: "fixed",
    left: 0,
    top: "20%",
    paddingLeft: "80px",
    color: "#D4AF37",

  },

  right: {

    width: "45%",
    marginLeft: "55%",
    marginTop: "100px",
    background: "#062A24",
    padding: "40px",
    borderRadius: "20px",
    boxShadow: "0 0 40px rgba(212,175,55,0.15)",

  },

  image: {

    width: "220px",
    borderRadius: "12px",
    marginBottom: "20px",

  },

  name: {

    fontSize: "52px",
    margin: 0,

  },

  title: {

    fontSize: "20px",
    color: "#E6D3A3",

  },

  heading: {

    color: "#D4AF37",

  },

  card: {

    padding: "20px",
    marginTop: "20px",
    background: "#0A3A32",
    borderRadius: "12px",
    cursor: "pointer",

  },

  desc: {

    color: "#EEE",

  },

  back: {

    background: "none",
    border: "none",
    color: "#D4AF37",
    cursor: "pointer",
    marginBottom: "20px",

  },

};
